<!DOCTYPE html>
<html>
  <head>
    <title>Log in</title>
    <link href="main.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1> Welcome! </h1>
    <h2> Please log in! </h2>
    <form action="fizzbuzz.html" method="GET">
      <br>
      <label for="username">Username:</label><br>
      <input type="text" id="username" name="username" onkeyup="sendUser(), setUser()" onchange="sendUser(), setUser()"><br><br>
      <input type="submit" value="Submit">
    </form>
    <script src="main.js"></script>
    <script>
      function sendUser(){
         get("http://basic-web.dev.avc.web.usf.edu/" + document.getElementById("username").innerHTML).then(function(response){
          if(response.status == 200){
            const username = response.data.id; //The username that was requested. In this case it is "myUserName".
            const score = response.data.score; //The user's current score.
          }
          else{
            //User "myUserName" not found.
            //response.data is null
            post("http://basic-web.dev.avc.web.usf.edu/" + document.getElementById("username").innerHTML, { score: 0 }); //create a new user.
          }
        });
      }
        </script>
  </body>
</html>
